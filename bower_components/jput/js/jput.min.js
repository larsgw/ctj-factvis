/*
 * jQuery jPut Plug-in 1.1.5
 * http://plugins.jquery.com/jput/
 * Developed by Shabeer Ali M 
 * Email : shabeer@jput.org
*/
(function(e){e.fn.jPut=function(n){var r={name:"",jsonData:"",dataName:"",limit:0,prepend:false,ajax_url:"",ajax_data:"",ajax_type:"GET",ajax_dataType:"json",ajax_jsonpCallback:"",done:function(e){},error:function(e){}};var n=e.extend({},r,n);var i;try{function s(e,t){if(e=="")return t;if(e.indexOf(".")==-1)return t[e];e=e.split(".");for(var n=0;n<e.length;n++){t=t[e[n]]}return t}function o(n){var r=n.jsonData;if(typeof r!="object")r=e.parseJSON(n.jsonData);if(typeof r!="object")throw"Invalid JSON data!";r=s(n.dataName,n.jsonData);if(r==null)throw"JSON data is empty!";if(n.limit!=0)r=r.slice(0,n.limit);n.jsonData=r;e.each(r,function(r,o){i=a.html();if(l!=null)e.each(l,function(e,n){var r=new RegExp(n);t=n.replace(/{{|}}/g,"");t=t.split("||");newval=s(t[0],o);if((newval==""||newval==undefined)&&t.length!=1)i=i.replace(n,t[1]);else i=i.replace(n,s(t[0],o))});i=i.replace("jsrc","src");if(n.prepend==false)u.append(i);else u.prepend(i)});e.isFunction(n.done)&&n.done.call(this,n.jsonData)}e('[jput="'+n.name+'"],[jput]').hide();var u=e(this);var a=n.name==""?e("[jput]").clone():e('[jput="'+n.name+'"]').clone();if(a.length==0)throw"Cant find the jPut template!";var f=/\{{([^}}]+)\}}/g;var l=a.html().match(f);if(n.ajax_url!=""){e.ajax({url:n.ajax_url,data:n.ajax_data,dataType:n.ajax_dataType,jsonpCallback:n.ajax_jsonpCallback,type:n.ajax_type,success:function(e){n.jsonData=e;o(n)},error:function(e){alert("jPut:Ajax Error")}})}else o(n)}catch(c){e.isFunction(n.error)&&n.error.call(this,c)}this.getValue=function(e){return n.jsonData[e]};return this.each(function(){})}})(jQuery)