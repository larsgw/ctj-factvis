// Generated by CoffeeScript 1.10.0
(function() {
  var buildUrl, forceArray, isPlainObject, ref, shortLang, wd_;

  wd_ = require('../helpers/helpers');

  buildUrl = require('../utils/build_url');

  ref = require('../utils/utils'), isPlainObject = ref.isPlainObject, forceArray = ref.forceArray, shortLang = ref.shortLang;

  module.exports = function(ids, languages, props, format) {
    var query, ref1;
    if (isPlainObject(ids)) {
      ref1 = ids, ids = ref1.ids, languages = ref1.languages, props = ref1.props, format = ref1.format;
    }
    format || (format = 'json');
    if (!((ids != null) || ids.length === 0)) {
      throw new Error('no id provided');
    }
    if (ids.length > 50) {
      console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\nthis request won't get all the desired entities.\nYou can use getManyEntities instead to generate several request urls\nto work around this limitation");
    }
    ids = wd_.normalizeIds(forceArray(ids));
    props = forceArray(props);
    query = {
      action: 'wbgetentities',
      ids: ids.join('|'),
      format: format
    };
    if (languages != null) {
      languages = forceArray(languages).map(shortLang);
      query.languages = languages.join('|');
    }
    if ((props != null ? props.length : void 0) > 0) {
      query.props = props.join('|');
    }
    return buildUrl('wikidata', query);
  };

}).call(this);
